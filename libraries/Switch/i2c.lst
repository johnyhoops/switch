   1               		.file	"i2c.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   9               		.text
  10               	.Ltext0:
  84               	getValue:
  85               		.stabd	46,0,0
   1:../libraries/Switch/i2c.c **** #include <avr/io.h>
   2:../libraries/Switch/i2c.c **** #include <avr/interrupt.h>
   3:../libraries/Switch/i2c.c **** 
   4:../libraries/Switch/i2c.c **** #include "i2c.h"
   5:../libraries/Switch/i2c.c **** #include "twi.h"
   6:../libraries/Switch/i2c.c **** 
   7:../libraries/Switch/i2c.c **** #define i2c_address 72
   8:../libraries/Switch/i2c.c **** static int16_t value = 0;
   9:../libraries/Switch/i2c.c **** 
  10:../libraries/Switch/i2c.c **** 
  11:../libraries/Switch/i2c.c **** static void init(uint8_t reference)
  12:../libraries/Switch/i2c.c **** {
  13:../libraries/Switch/i2c.c **** 	twi_init();
  14:../libraries/Switch/i2c.c **** }
  15:../libraries/Switch/i2c.c **** 
  16:../libraries/Switch/i2c.c **** 
  17:../libraries/Switch/i2c.c **** static void update(uint8_t reference)
  18:../libraries/Switch/i2c.c **** {
  19:../libraries/Switch/i2c.c **** 	uint8_t rxBuffer[2];
  20:../libraries/Switch/i2c.c **** 	uint8_t config = 0x8F;
  21:../libraries/Switch/i2c.c **** 
  22:../libraries/Switch/i2c.c **** 	twi_writeTo(i2c_address, &config, 1, 1);
  23:../libraries/Switch/i2c.c **** 	twi_readFrom(i2c_address, rxBuffer, 2);
  24:../libraries/Switch/i2c.c **** 
  25:../libraries/Switch/i2c.c **** 	value = (rxBuffer[0] << 8) + rxBuffer[1];
  26:../libraries/Switch/i2c.c **** }
  27:../libraries/Switch/i2c.c **** 
  28:../libraries/Switch/i2c.c **** 
  29:../libraries/Switch/i2c.c **** static int16_t getValue(uint8_t reference)
  30:../libraries/Switch/i2c.c **** {
  87               	.LM0:
  88               	.LFBB1:
  89               	/* prologue: function */
  90               	/* frame size = 0 */
  91               	/* stack size = 0 */
  92               	.L__stack_usage = 0
  31:../libraries/Switch/i2c.c **** 	return value;
  32:../libraries/Switch/i2c.c **** }
  94               	.LM1:
  95 0000 8091 0000 		lds r24,value
  96 0004 9091 0000 		lds r25,value+1
  97 0008 0895      		ret
  99               	.Lscope1:
 101               		.stabd	78,0,0
 105               	update:
 106               		.stabd	46,0,0
  18:../libraries/Switch/i2c.c **** {
 108               	.LM2:
 109               	.LFBB2:
 110 000a CF93      		push r28
 111 000c DF93      		push r29
 112 000e 00D0      		rcall .
 113 0010 1F92      		push __zero_reg__
 114 0012 CDB7      		in r28,__SP_L__
 115 0014 DEB7      		in r29,__SP_H__
 116               	/* prologue: function */
 117               	/* frame size = 3 */
 118               	/* stack size = 5 */
 119               	.L__stack_usage = 5
  20:../libraries/Switch/i2c.c **** 	uint8_t config = 0x8F;
 121               	.LM3:
 122 0016 8FE8      		ldi r24,lo8(-113)
 123 0018 8B83      		std Y+3,r24
  22:../libraries/Switch/i2c.c **** 	twi_writeTo(i2c_address, &config, 1, 1);
 125               	.LM4:
 126 001a 21E0      		ldi r18,lo8(1)
 127 001c 41E0      		ldi r20,lo8(1)
 128 001e BE01      		movw r22,r28
 129 0020 6D5F      		subi r22,-3
 130 0022 7F4F      		sbci r23,-1
 131 0024 88E4      		ldi r24,lo8(72)
 132 0026 00D0      		rcall twi_writeTo
  23:../libraries/Switch/i2c.c **** 	twi_readFrom(i2c_address, rxBuffer, 2);
 134               	.LM5:
 135 0028 42E0      		ldi r20,lo8(2)
 136 002a BE01      		movw r22,r28
 137 002c 6F5F      		subi r22,-1
 138 002e 7F4F      		sbci r23,-1
 139 0030 88E4      		ldi r24,lo8(72)
 140 0032 00D0      		rcall twi_readFrom
  25:../libraries/Switch/i2c.c **** 	value = (rxBuffer[0] << 8) + rxBuffer[1];
 142               	.LM6:
 143 0034 9981      		ldd r25,Y+1
 144 0036 80E0      		ldi r24,0
 145 0038 2A81      		ldd r18,Y+2
 146 003a 820F      		add r24,r18
 147 003c 911D      		adc r25,__zero_reg__
 148 003e 9093 0000 		sts value+1,r25
 149 0042 8093 0000 		sts value,r24
 150               	/* epilogue start */
  26:../libraries/Switch/i2c.c **** }
 152               	.LM7:
 153 0046 0F90      		pop __tmp_reg__
 154 0048 0F90      		pop __tmp_reg__
 155 004a 0F90      		pop __tmp_reg__
 156 004c DF91      		pop r29
 157 004e CF91      		pop r28
 158 0050 0895      		ret
 164               	.Lscope2:
 166               		.stabd	78,0,0
 170               	init:
 171               		.stabd	46,0,0
  12:../libraries/Switch/i2c.c **** {
 173               	.LM8:
 174               	.LFBB3:
 175               	/* prologue: function */
 176               	/* frame size = 0 */
 177               	/* stack size = 0 */
 178               	.L__stack_usage = 0
  13:../libraries/Switch/i2c.c **** 	twi_init();
 180               	.LM9:
 181 0052 00C0      		rjmp twi_init
 183               	.Lscope3:
 185               		.stabd	78,0,0
 187               	.global	i2c
 189               	i2c:
 190               		.stabd	46,0,0
  33:../libraries/Switch/i2c.c **** 
  34:../libraries/Switch/i2c.c **** 
  35:../libraries/Switch/i2c.c **** HAL i2cHAL = {
  36:../libraries/Switch/i2c.c **** 	init,
  37:../libraries/Switch/i2c.c **** 	update,
  38:../libraries/Switch/i2c.c **** 	getValue,
  39:../libraries/Switch/i2c.c **** 	0
  40:../libraries/Switch/i2c.c **** };
  41:../libraries/Switch/i2c.c **** 
  42:../libraries/Switch/i2c.c **** 
  43:../libraries/Switch/i2c.c **** HAL* i2c(void)
  44:../libraries/Switch/i2c.c **** {
 192               	.LM10:
 193               	.LFBB4:
 194               	/* prologue: function */
 195               	/* frame size = 0 */
 196               	/* stack size = 0 */
 197               	.L__stack_usage = 0
  45:../libraries/Switch/i2c.c **** 	return &i2cHAL;
  46:../libraries/Switch/i2c.c **** }
 199               	.LM11:
 200 0054 80E0      		ldi r24,lo8(i2cHAL)
 201 0056 90E0      		ldi r25,hi8(i2cHAL)
 202 0058 0895      		ret
 204               	.Lscope4:
 206               		.stabd	78,0,0
 207               	.global	i2cHAL
 208               		.section	.rodata
 211               	i2cHAL:
 212 0000 0000      		.word	gs(init)
 213 0002 0000      		.word	gs(update)
 214 0004 0000      		.word	gs(getValue)
 215 0006 0000      		.word	0
 216               		.local	value
 217               		.comm	value,2,1
 220               		.text
 222               	.Letext0:
 223               		.ident	"GCC: (GNU) 4.7.2"
 224               	.global __do_copy_data
 225               	.global __do_clear_bss
DEFINED SYMBOLS
                            *ABS*:0000000000000000 i2c.c
     /tmp/ccJDrZC3.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccJDrZC3.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccJDrZC3.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccJDrZC3.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccJDrZC3.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccJDrZC3.s:84     .text:0000000000000000 getValue
                             .bss:0000000000000000 value
     /tmp/ccJDrZC3.s:105    .text:000000000000000a update
     /tmp/ccJDrZC3.s:170    .text:0000000000000052 init
     /tmp/ccJDrZC3.s:189    .text:0000000000000054 i2c
     /tmp/ccJDrZC3.s:211    .rodata:0000000000000000 i2cHAL

UNDEFINED SYMBOLS
twi_writeTo
twi_readFrom
twi_init
__do_copy_data
__do_clear_bss
