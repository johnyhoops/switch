   1               		.file	"ntcHoneywell.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   9               		.text
  10               	.Ltext0:
  89               	getValue:
  90               		.stabd	46,0,0
   1:../libraries/Switch/ntcHoneywell.c **** #include <avr/pgmspace.h>
   2:../libraries/Switch/ntcHoneywell.c **** 
   3:../libraries/Switch/ntcHoneywell.c **** #include "ntcHoneywell.h"
   4:../libraries/Switch/ntcHoneywell.c **** #include "adc.h"
   5:../libraries/Switch/ntcHoneywell.c **** 
   6:../libraries/Switch/ntcHoneywell.c **** static int deciCelcius[2] = {0};
   7:../libraries/Switch/ntcHoneywell.c **** 
   8:../libraries/Switch/ntcHoneywell.c **** // stainless steel cased NTC thermistor from Honeywell with 4K7 drive resistor
   9:../libraries/Switch/ntcHoneywell.c **** #define TEMP_TABLE { \
  10:../libraries/Switch/ntcHoneywell.c **** 	1018,	1016,	1013,	1008,	1003,	995,	986,	974,	\
  11:../libraries/Switch/ntcHoneywell.c **** 	960,	942,	920,	894,	864,	829,	790,	747,	\
  12:../libraries/Switch/ntcHoneywell.c **** 	701,	653,	602,	552,	502,	453,	406,	363,	\
  13:../libraries/Switch/ntcHoneywell.c **** 	322,	286,	252,	222,	195,	172,	151,	133,	\
  14:../libraries/Switch/ntcHoneywell.c **** 	117,	102,	90,		80,		70,		62,		55}
  15:../libraries/Switch/ntcHoneywell.c **** 
  16:../libraries/Switch/ntcHoneywell.c **** static const int16_t PROGMEM TEMP_LOOKUP_TABLE[] =  TEMP_TABLE;
  17:../libraries/Switch/ntcHoneywell.c **** #define TEMP_LOOKUP_TABLE_SIZE (sizeof(TEMP_LOOKUP_TABLE) / sizeof(int16_t))
  18:../libraries/Switch/ntcHoneywell.c **** 
  19:../libraries/Switch/ntcHoneywell.c **** static int16_t getDeciCelcius(int16_t rawADC)
  20:../libraries/Switch/ntcHoneywell.c **** {
  21:../libraries/Switch/ntcHoneywell.c **** 	int16_t ref_lo, ref_hi, delta, temp;
  22:../libraries/Switch/ntcHoneywell.c **** 	int8_t i;
  23:../libraries/Switch/ntcHoneywell.c **** 
  24:../libraries/Switch/ntcHoneywell.c **** 	i = TEMP_LOOKUP_TABLE_SIZE;
  25:../libraries/Switch/ntcHoneywell.c **** 
  26:../libraries/Switch/ntcHoneywell.c **** 	do {
  27:../libraries/Switch/ntcHoneywell.c ****         ref_lo = (int16_t)pgm_read_word(&TEMP_LOOKUP_TABLE[--i]);
  28:../libraries/Switch/ntcHoneywell.c ****     } while (((int16_t)rawADC > ref_lo) && (i > 1));
  29:../libraries/Switch/ntcHoneywell.c **** 
  30:../libraries/Switch/ntcHoneywell.c ****     ref_hi = (int16_t)pgm_read_word(&TEMP_LOOKUP_TABLE[--i]);
  31:../libraries/Switch/ntcHoneywell.c ****     delta = ref_hi - ref_lo;
  32:../libraries/Switch/ntcHoneywell.c ****     temp = -400 + (i + 1) * 50 - (50 * ((int16_t)rawADC - ref_lo)) / delta;
  33:../libraries/Switch/ntcHoneywell.c **** 
  34:../libraries/Switch/ntcHoneywell.c **** 	return temp;
  35:../libraries/Switch/ntcHoneywell.c **** }
  36:../libraries/Switch/ntcHoneywell.c **** 
  37:../libraries/Switch/ntcHoneywell.c **** 
  38:../libraries/Switch/ntcHoneywell.c **** static int16_t getValue(uint8_t reference)
  39:../libraries/Switch/ntcHoneywell.c **** {
  92               	.LM0:
  93               	.LFBB1:
  94               	/* prologue: function */
  95               	/* frame size = 0 */
  96               	/* stack size = 0 */
  97               	.L__stack_usage = 0
  40:../libraries/Switch/ntcHoneywell.c **** 	uint8_t index = (reference & 0x01);
  41:../libraries/Switch/ntcHoneywell.c **** 	return deciCelcius[index];
  99               	.LM1:
 100 0000 E82F      		mov r30,r24
 101 0002 E170      		andi r30,1
 102 0004 F0E0      		ldi r31,0
 103 0006 EE0F      		lsl r30
 104 0008 FF1F      		rol r31
 105 000a E050      		subi r30,lo8(-(deciCelcius))
 106 000c F040      		sbci r31,hi8(-(deciCelcius))
  42:../libraries/Switch/ntcHoneywell.c **** }
 108               	.LM2:
 109 000e 8081      		ld r24,Z
 110 0010 9181      		ldd r25,Z+1
 111 0012 0895      		ret
 113               	.Lscope1:
 115               		.stabd	78,0,0
 119               	update:
 120               		.stabd	46,0,0
  43:../libraries/Switch/ntcHoneywell.c **** 
  44:../libraries/Switch/ntcHoneywell.c **** 
  45:../libraries/Switch/ntcHoneywell.c **** static void update(uint8_t reference)
  46:../libraries/Switch/ntcHoneywell.c **** {
 122               	.LM3:
 123               	.LFBB2:
 124 0014 1F93      		push r17
 125 0016 CF93      		push r28
 126 0018 DF93      		push r29
 127               	/* prologue: function */
 128               	/* frame size = 0 */
 129               	/* stack size = 3 */
 130               	.L__stack_usage = 3
 131 001a 182F      		mov r17,r24
  47:../libraries/Switch/ntcHoneywell.c **** 	uint8_t index = (reference & 0x01);
  48:../libraries/Switch/ntcHoneywell.c **** 	deciCelcius[index] = getDeciCelcius(adc()->getValue(reference));
 133               	.LM4:
 134 001c 8170      		andi r24,1
 135 001e C82F      		mov r28,r24
 136 0020 A0E0      		ldi r26,0
 137 0022 DA2F      		mov r29,r26
 138 0024 00D0      		rcall adc
 139 0026 DC01      		movw r26,r24
 140 0028 1496      		adiw r26,4
 141 002a ED91      		ld r30,X+
 142 002c FC91      		ld r31,X
 143 002e 1597      		sbiw r26,4+1
 144 0030 812F      		mov r24,r17
 145 0032 0995      		icall
 146 0034 46E2      		ldi r20,lo8(38)
 147 0036 50E0      		ldi r21,0
 148               	.L4:
  45:../libraries/Switch/ntcHoneywell.c **** static void update(uint8_t reference)
 150               	.LM5:
 151 0038 A42F      		mov r26,r20
 152 003a AF5F      		subi r26,lo8(-(1))
 153               	.LBB6:
 154               	.LBB7:
 155               	.LBB8:
  27:../libraries/Switch/ntcHoneywell.c ****         ref_lo = (int16_t)pgm_read_word(&TEMP_LOOKUP_TABLE[--i]);
 157               	.LM6:
 158 003c FA01      		movw r30,r20
 159 003e EE0F      		lsl r30
 160 0040 FF1F      		rol r31
 161 0042 E050      		subi r30,lo8(-(TEMP_LOOKUP_TABLE))
 162 0044 F040      		sbci r31,hi8(-(TEMP_LOOKUP_TABLE))
 163               	/* #APP */
 164               	 ;  27 "../libraries/Switch/ntcHoneywell.c" 1
 165 0046 6591      		lpm r22, Z+
 166 0048 7491      		lpm r23, Z
 167               		
 168               	 ;  0 "" 2
 169               	/* #NOAPP */
 170               	.LBE8:
 171 004a 9B01      		movw r18,r22
  28:../libraries/Switch/ntcHoneywell.c ****     } while (((int16_t)rawADC > ref_lo) && (i > 1));
 173               	.LM7:
 174 004c 6817      		cp r22,r24
 175 004e 7907      		cpc r23,r25
 176 0050 04F0      		brlt .L3
 177               	.L5:
 178               	.LBB9:
  30:../libraries/Switch/ntcHoneywell.c ****     ref_hi = (int16_t)pgm_read_word(&TEMP_LOOKUP_TABLE[--i]);
 180               	.LM8:
 181 0052 A250      		subi r26,lo8(-(-2))
 182 0054 4A2F      		mov r20,r26
 183 0056 5527      		clr r21
 184 0058 47FD      		sbrc r20,7
 185 005a 5095      		com r21
 186 005c FA01      		movw r30,r20
 187 005e EE0F      		lsl r30
 188 0060 FF1F      		rol r31
 189 0062 E050      		subi r30,lo8(-(TEMP_LOOKUP_TABLE))
 190 0064 F040      		sbci r31,hi8(-(TEMP_LOOKUP_TABLE))
 191               	/* #APP */
 192               	 ;  30 "../libraries/Switch/ntcHoneywell.c" 1
 193 0066 6591      		lpm r22, Z+
 194 0068 7491      		lpm r23, Z
 195               		
 196               	 ;  0 "" 2
 197               	/* #NOAPP */
 198               	.LBE9:
 199               	.LBE7:
 200               	.LBE6:
 202               	.LM9:
 203 006a FE01      		movw r30,r28
 204 006c EE0F      		lsl r30
 205 006e FF1F      		rol r31
 206 0070 E050      		subi r30,lo8(-(deciCelcius))
 207 0072 F040      		sbci r31,hi8(-(deciCelcius))
 208               	.LBB12:
 209               	.LBB10:
  32:../libraries/Switch/ntcHoneywell.c ****     temp = -400 + (i + 1) * 50 - (50 * ((int16_t)rawADC - ref_lo)) / delta;
 211               	.LM10:
 212 0074 4F5F      		subi r20,-1
 213 0076 5F4F      		sbci r21,-1
 214 0078 A2E3      		ldi r26,lo8(50)
 215 007a A49F      		mul r26,r20
 216 007c E001      		movw r28,r0
 217 007e A59F      		mul r26,r21
 218 0080 D00D      		add r29,r0
 219 0082 1124      		clr __zero_reg__
 220 0084 C059      		subi r28,-112
 221 0086 D140      		sbci r29,1
 222 0088 A901      		movw r20,r18
 223 008a 481B      		sub r20,r24
 224 008c 590B      		sbc r21,r25
 225 008e A49F      		mul r26,r20
 226 0090 C001      		movw r24,r0
 227 0092 A59F      		mul r26,r21
 228 0094 900D      		add r25,r0
 229 0096 1124      		clr __zero_reg__
  31:../libraries/Switch/ntcHoneywell.c ****     delta = ref_hi - ref_lo;
 231               	.LM11:
 232 0098 621B      		sub r22,r18
 233 009a 730B      		sbc r23,r19
  32:../libraries/Switch/ntcHoneywell.c ****     temp = -400 + (i + 1) * 50 - (50 * ((int16_t)rawADC - ref_lo)) / delta;
 235               	.LM12:
 236 009c 00D0      		rcall __divmodhi4
 237 009e C60F      		add r28,r22
 238 00a0 D71F      		adc r29,r23
 239               	.LBE10:
 240               	.LBE12:
 242               	.LM13:
 243 00a2 D183      		std Z+1,r29
 244 00a4 C083      		st Z,r28
 245 00a6 00C0      		rjmp .L7
 246               	.L3:
 247 00a8 4150      		subi r20,1
 248 00aa 5109      		sbc r21,__zero_reg__
 249               	.LBB13:
 250               	.LBB11:
  28:../libraries/Switch/ntcHoneywell.c ****     } while (((int16_t)rawADC > ref_lo) && (i > 1));
 252               	.LM14:
 253 00ac 01F0      		breq .+2
 254 00ae 00C0      		rjmp .L4
 255 00b0 00C0      		rjmp .L5
 256               	.L7:
 257               	/* epilogue start */
 258               	.LBE11:
 259               	.LBE13:
  49:../libraries/Switch/ntcHoneywell.c **** }
 261               	.LM15:
 262 00b2 DF91      		pop r29
 263 00b4 CF91      		pop r28
 264 00b6 1F91      		pop r17
 265 00b8 0895      		ret
 282               	.Lscope2:
 284               		.stabd	78,0,0
 286               	.global	ntcHoneywell
 288               	ntcHoneywell:
 289               		.stabd	46,0,0
  50:../libraries/Switch/ntcHoneywell.c **** 
  51:../libraries/Switch/ntcHoneywell.c **** 
  52:../libraries/Switch/ntcHoneywell.c **** HAL ntcHoneywellHAL = {
  53:../libraries/Switch/ntcHoneywell.c **** 	0,
  54:../libraries/Switch/ntcHoneywell.c **** 	update,
  55:../libraries/Switch/ntcHoneywell.c **** 	getValue,
  56:../libraries/Switch/ntcHoneywell.c **** 	0
  57:../libraries/Switch/ntcHoneywell.c **** };
  58:../libraries/Switch/ntcHoneywell.c **** 
  59:../libraries/Switch/ntcHoneywell.c **** 
  60:../libraries/Switch/ntcHoneywell.c **** HAL* ntcHoneywell(void)
  61:../libraries/Switch/ntcHoneywell.c **** {
 291               	.LM16:
 292               	.LFBB3:
 293               	/* prologue: function */
 294               	/* frame size = 0 */
 295               	/* stack size = 0 */
 296               	.L__stack_usage = 0
  62:../libraries/Switch/ntcHoneywell.c **** 	return &ntcHoneywellHAL;
  63:../libraries/Switch/ntcHoneywell.c **** }
 298               	.LM17:
 299 00ba 80E0      		ldi r24,lo8(ntcHoneywellHAL)
 300 00bc 90E0      		ldi r25,hi8(ntcHoneywellHAL)
 301 00be 0895      		ret
 303               	.Lscope3:
 305               		.stabd	78,0,0
 306               	.global	ntcHoneywellHAL
 307               		.section	.rodata
 310               	ntcHoneywellHAL:
 311 0000 0000      		.word	0
 312 0002 0000      		.word	gs(update)
 313 0004 0000      		.word	gs(getValue)
 314 0006 0000      		.word	0
 315               		.local	deciCelcius
 316               		.comm	deciCelcius,4,1
 317               		.section	.progmem.data,"a",@progbits
 320               	TEMP_LOOKUP_TABLE:
 321 0000 FA03      		.word	1018
 322 0002 F803      		.word	1016
 323 0004 F503      		.word	1013
 324 0006 F003      		.word	1008
 325 0008 EB03      		.word	1003
 326 000a E303      		.word	995
 327 000c DA03      		.word	986
 328 000e CE03      		.word	974
 329 0010 C003      		.word	960
 330 0012 AE03      		.word	942
 331 0014 9803      		.word	920
 332 0016 7E03      		.word	894
 333 0018 6003      		.word	864
 334 001a 3D03      		.word	829
 335 001c 1603      		.word	790
 336 001e EB02      		.word	747
 337 0020 BD02      		.word	701
 338 0022 8D02      		.word	653
 339 0024 5A02      		.word	602
 340 0026 2802      		.word	552
 341 0028 F601      		.word	502
 342 002a C501      		.word	453
 343 002c 9601      		.word	406
 344 002e 6B01      		.word	363
 345 0030 4201      		.word	322
 346 0032 1E01      		.word	286
 347 0034 FC00      		.word	252
 348 0036 DE00      		.word	222
 349 0038 C300      		.word	195
 350 003a AC00      		.word	172
 351 003c 9700      		.word	151
 352 003e 8500      		.word	133
 353 0040 7500      		.word	117
 354 0042 6600      		.word	102
 355 0044 5A00      		.word	90
 356 0046 5000      		.word	80
 357 0048 4600      		.word	70
 358 004a 3E00      		.word	62
 359 004c 3700      		.word	55
 363               		.text
 365               	.Letext0:
 366               		.ident	"GCC: (GNU) 4.7.2"
 367               	.global __do_copy_data
 368               	.global __do_clear_bss
DEFINED SYMBOLS
                            *ABS*:0000000000000000 ntcHoneywell.c
     /tmp/ccMPpPRJ.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccMPpPRJ.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccMPpPRJ.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccMPpPRJ.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccMPpPRJ.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccMPpPRJ.s:89     .text:0000000000000000 getValue
                             .bss:0000000000000000 deciCelcius
     /tmp/ccMPpPRJ.s:119    .text:0000000000000014 update
     /tmp/ccMPpPRJ.s:320    .progmem.data:0000000000000000 TEMP_LOOKUP_TABLE
     /tmp/ccMPpPRJ.s:288    .text:00000000000000ba ntcHoneywell
     /tmp/ccMPpPRJ.s:310    .rodata:0000000000000000 ntcHoneywellHAL

UNDEFINED SYMBOLS
adc
__divmodhi4
__do_copy_data
__do_clear_bss
